<mat-card class="turn-card"
          [ngStyle]="{'border-left-color': getPlayerColor(currentTurn)}"
          [class.is-active]="isMyTurn">
  <mat-card-header>
    <!-- Player avatar with color -->
    <div mat-card-avatar class="player-avatar" [ngStyle]="{'background-color': getPlayerColor(currentTurn)}">
        {{ currentPlayer?.order }}
    </div>

    <!-- Turn information -->
    <mat-card-title>
      <span *ngIf="isMyTurn" class="my-turn">Your Turn!</span>
      <span *ngIf="!isMyTurn">{{ currentTurn?.name }}'s Turn</span>
    </mat-card-title>

    <mat-card-subtitle *ngIf="nextTurn">
      Up Next: {{ nextTurn!.name }}
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <!-- Turn progress indicators -->
    <div class="turn-progress">
      <div class="progress-info">
        <span class="time-elapsed">Time:
            <app-turn-timer
                *ngIf="game && game.lastTurnStartTime"
                [startTime]="game!.lastTurnStartTime">
            </app-turn-timer>
        </span>
        <span
          *ngIf="isMyTurn"
          class="progress-percentage"
          [class.high-progress]="turnProgress > 75">
          {{ turnProgress.toFixed(0) }}%
        </span>
      </div>

      <mat-progress-bar
        *ngIf="isMyTurn"
        [value]="turnProgress"
        [color]="turnProgress > 75 ? 'warn' : 'primary'"
        class="turn-progress-bar"
        [class.high-progress]="turnProgress > 75">
      </mat-progress-bar>
    </div>
  </mat-card-content>

  <mat-card-actions>
    <button
      mat-raised-button
      type="button"
      color="primary"
      (click)="onEndTurn()"
      *ngIf="isMyTurn">
      End Turn
    </button>
  </mat-card-actions>
</mat-card>
